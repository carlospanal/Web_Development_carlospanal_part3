{"version":3,"sources":["services/persons.js","components/App.js","index.js"],"names":["baseUrl","newObject","console","log","axios","post","then","response","data","get","id","delete","put","Notification","message","mType","className","content","MainTitle","titleStyle","color","titleColor","style","FilterComp","filter","handleFilterChange","value","onChange","FilteredNames","fpersons","setPersons","setFilteredPersons","persons","map","curr_person","key","name","number","onClick","window","confirm","personService","person","NewNameComp","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","App","useState","setTitleColor","setNewName","setNewNumber","setFilter","filteredPersons","titleCounter","setTitleCounter","titleCUp","setTitleCUp","iniMessage","setMessage","setTimeout","useEffect","tempMessage","tmessage","mstime","event","target","includes","preventDefault","nameObject","length","concat","catch","error","status","targetId","checkName","ReactDOM","render","document","getElementById"],"mappings":"+OAEMA,EAAU,eA2BD,EAxBA,SAAAC,GAGX,OAFAC,QAAQC,IAAI,aACIC,IAAMC,KAAKL,EAASC,GACrBK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAqB9B,EAlBC,WAEZ,OADgBJ,IAAMK,IAAIT,GACXM,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAgB9B,EAbE,SAACE,GAEd,OADgBN,IAAMO,OAAN,UAAgBX,EAAhB,YAA2BU,IAC5BJ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAW9B,EARE,SAACE,EAAGT,GAGjB,OAFAC,QAAQC,IAAIO,EAAGT,GACCG,IAAMQ,IAAN,UAAaZ,EAAb,YAAwBU,GAAMT,GAC/BK,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCrBvCK,EAAe,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACtB,OAAgB,OAAZA,EACK,KAEY,YAAjBA,EAAQC,MAER,yBAAKC,UAAU,gBACZF,EAAQG,SAIM,UAAjBH,EAAQC,MAER,yBAAKC,UAAU,cACZF,EAAQG,cAHf,GASIC,EAAY,SAAC,GAAkB,IAC7BC,EAAa,CACjBC,MAFgC,EAAhBC,YAMlB,OACE,wBAAIC,MAAOH,GAAX,cAIEI,EAAa,SAAC,GAAiC,IAAhCC,EAA+B,EAA/BA,OAAOC,EAAwB,EAAxBA,mBAE1B,OACE,2BACEC,MAAOF,EACPG,SAAUF,KAKVG,EAAgB,SAAC,GAAsD,IAArDC,EAAoD,EAApDA,SAASC,EAA2C,EAA3CA,WAAWC,EAAgC,EAAhCA,mBAAmBC,EAAa,EAAbA,QAE7D,OACE,6BACE,4BACGH,EAASI,KAAI,SAAAC,GAAW,OACvB,wBAAIC,IAAKD,EAAYE,MAClBF,EAAYE,KADf,IACsBF,EAAYG,OAChC,4BAAQC,QAAS,WACXC,OAAOC,QAAQ,kCACjBC,EACYP,EAAYxB,IACrBJ,MAAK,WACJwB,EAAWE,EAAQR,QAAO,SAAAkB,GAAM,OAAIA,EAAOhC,KAAOwB,EAAYxB,OAC9DqB,EAAmBF,EAASL,QAAO,SAAAkB,GAAM,OAAIA,EAAOhC,KAAOwB,EAAYxB,YAN/E,iBAiBNiC,EAAc,SAAC,GAAqE,IAApEC,EAAmE,EAAnEA,QAAQC,EAA2D,EAA3DA,QAAQC,EAAmD,EAAnDA,iBAAiBC,EAAkC,EAAlCA,UAAUC,EAAwB,EAAxBA,mBAE/D,OACE,0BAAMC,SAAUL,GAChB,oCACA,2BACElB,MAAOmB,EACPlB,SAAUmB,IAEZ,sCACA,2BACEpB,MAAOqB,EACPpB,SAAUqB,IAEZ,4BAAQE,KAAK,UAAb,UAiLWC,EA5KH,WAAO,IAAD,EACsBC,mBAAS,eAD/B,mBACR/B,EADQ,KACIgC,EADJ,OAEgBD,mBAAS,CACvC,CAAEhB,KAAM,cACNC,OAAQ,YAJI,mBAERL,EAFQ,KAECF,EAFD,OAMgBsB,mBAAS,IANzB,mBAMRP,EANQ,KAMCS,EAND,OAOoBF,mBAAS,IAP7B,mBAORL,EAPQ,KAOGQ,EAPH,OAQcH,mBAAS,IARvB,mBAQR5B,EARQ,KAQAgC,EARA,OASgCJ,mBAASpB,GATzC,mBASRyB,EATQ,KASS1B,EATT,OAU0BqB,mBAAS,GAVnC,mBAURM,EAVQ,KAUMC,EAVN,OAWkBP,oBAAS,GAX3B,mBAWRQ,EAXQ,KAWEC,EAXF,KAYVC,EAAW,CACf7C,QAAQ,2BACRF,MAAO,WAdO,EAgBeqC,mBAASU,GAhBxB,mBAgBRhD,EAhBQ,KAgBCiD,EAhBD,KAkBhBC,YAAW,WACU,MAAfN,GACFG,GAAY,GACK,IAAfH,GACFG,GAAY,GAEaF,GADZ,IAAXC,EACCF,EAAa,IAAI,IAAqB,IACpBA,EAAa,GAG/BA,EAAa,IAAI,EAAmB,EAClBA,EAAa,IAGpCL,EAAc,OAAD,OAAQK,EAAR,YAAwB,IAAIA,EAA5B,UAEZ,IAGHO,qBAAU,WACR/D,QAAQC,IAAI,UACZsC,IAEGnC,MAAK,SAAAC,GACJL,QAAQC,IAAI,qBACZ2B,EAAWvB,GACXwB,EAAmBxB,QAEtB,IAGH,IAAM2D,EAAc,SAACC,EAASC,GAC5BL,EAAWI,GACXH,YAAW,WAAOD,EAAW,QAAQK,IAsFvC,OAJAJ,YAAW,WACLlD,IAAUgD,GAAYC,EAAW,QACpC,KAGD,6BACE,kBAAC,EAAD,CACE1C,WAAYA,IAEd,kBAAC,EAAD,CAAcP,QAASA,IACrB,6CACA,kBAAC,EAAD,CACEU,OAAQA,EACRC,mBAlBmB,SAAC4C,GAC1Bb,EAAUa,EAAMC,OAAO5C,OACvBK,EAAmBC,EAAQR,QAAO,SAAAkB,GAAM,OACtCA,EAAON,KAAKmC,SAASF,EAAMC,OAAO5C,cAkBlC,uCACE,kBAAC,EAAD,CACEkB,QAvCQ,SAACyB,GACfnE,QAAQC,IAAI,OACZkE,EAAMG,iBA5DU,SAACC,GAEjB,GAAuE,IAAnEzC,EAAQR,QAAO,SAAAkB,GAAM,OAAIA,EAAON,OAAOqC,EAAWrC,QAAMsC,OAE1DpB,EAAW,IACXb,EACQgC,GACPnE,MAAK,SAAAC,GACJuB,EAAWE,EAAQ2C,OAAOpE,IAC1BwB,EAAmB0B,EAAgBkB,OAAOpE,IAC1C2D,EAAY,CACVjD,QAAQ,yBACRF,MAAO,WAEN,QAEJ6D,OAAM,SAAAC,GACyB,MAA1BA,EAAMtE,SAASuE,QACjBZ,EAAY,CACVjD,QAAQ,GAAD,OAAI4D,EAAMtE,SAASC,KAAKqE,OAC/B9D,MAAO,SACN,YAKL,CACF,IAAMgE,EAAS/C,EAAQR,QAAO,SAAAkB,GAAM,OAAIA,EAAON,OAAOqC,EAAWrC,QAAM,GAAG1B,GACtE6B,OAAOC,QAAP,UACCiC,EAAWrC,KADZ,gEAEAK,EACYsC,EAASN,GAClBnE,MAAK,SAAAC,GACJuB,EAAWE,EAAQC,KAAI,SAAAS,GAAM,OAAIA,EAAOhC,KAAOqE,EAAWrC,EAASnC,MACnEwB,EAAmB0B,EAAgBxB,KAAI,SAAAS,GAAM,OAAIA,EAAOhC,KAAOqE,EAAWrC,EAASnC,MACnF2D,EAAY,CACVjD,QAAS,wCACTF,MAAO,WAER,QAEF6D,OAAM,SAAAC,GAEHX,EAAY,CACVjD,QAAQ,iBAAD,OAAkBwD,EAAWrC,KAA7B,sCACPrB,MAAO,SACN,KACLe,EAAWE,EAAQR,QAAO,SAAAkB,GAAM,OAAIA,EAAON,OAASqC,EAAWrC,SAC/DlC,QAAQC,IAAI6B,EAAQR,QAAO,SAAAkB,GAAM,OAAIA,EAAOhC,KAAO+D,EAAW/D,OAC9DqB,EAAmB0B,EAAgBjC,QAAO,SAAAkB,GAAM,OAAIA,EAAON,OAASqC,EAAWrC,aAgBzF4C,CAJmB,CACjB5C,KAAMS,EACNR,OAAQU,KAmCJF,QAASA,EACTC,iBA/BiB,SAACuB,GACxBf,EAAWe,EAAMC,OAAO5C,QA+BlBqB,UAAWA,EACXC,mBA9BmB,SAACqB,GAC1Bd,EAAac,EAAMC,OAAO5C,UAgCxB,uCACA,kBAAC,EAAD,CACEG,SAAU4B,EACV3B,WAAYA,EACZC,mBAAoBA,EACpBC,QAASA,M,MCrPjBiD,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.54f14681.chunk.js","sourcesContent":["import axios from 'axios'\r\n//const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = '/api/persons'\r\n\r\n\r\nconst create = newObject => {\r\n    console.log('personsjs')\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst initGet = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst deleteId = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst updateId = (id,newObject) => {\r\n    console.log(id,newObject)\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\n\r\n\r\nexport default {create,initGet,deleteId,updateId}\r\n","import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport personService from '../services/persons'\nconst Notification = ({ message }) => {\n  if (message === null) {\n    return null\n  }\n  if (message.mType=== \"success\"){\n    return (\n      <div className=\"greenmessage\">\n        {message.content}\n      </div>\n    )\n  }\n  if (message.mType=== \"error\"){\n    return (\n      <div className=\"redmessage\">\n        {message.content}\n      </div>\n    )\n  }\n}\n\nconst MainTitle = ({titleColor}) => {\n  const titleStyle = {\n    color: titleColor,\n    \n    \n  }\n  return(\n    <h1 style={titleStyle}>Phonebook</h1>\n  )\n}\n\nconst FilterComp = ({filter,handleFilterChange}) => {\n\n  return(\n    <input\n      value={filter}\n      onChange={handleFilterChange}\n    />\n  )\n}\n\nconst FilteredNames = ({fpersons,setPersons,setFilteredPersons,persons}) => {\n\n  return (\n    <div>\n      <ul>\n        {fpersons.map(curr_person => \n          <li key={curr_person.name}>\n            {curr_person.name} {curr_person.number}\n            <button onClick={() => {\n              if (window.confirm(\"Do you really want to delete?\")) { \n                personService\n                  .deleteId(curr_person.id)\n                  .then(() => {\n                    setPersons(persons.filter(person => person.id !== curr_person.id))\n                    setFilteredPersons(fpersons.filter(person => person.id !== curr_person.id))\n                  })\n              }\n            }}>delete</button>\n          </li>\n        )}\n      </ul>\n     </div>\n  )\n}\n\nconst NewNameComp = ({addName,newName,handleNameChange,newNumber,handleNumberChange}) => {\n\n  return(\n    <form onSubmit={addName}>\n    <p>name:</p>\n    <input\n      value={newName}\n      onChange={handleNameChange}\n    />\n    <p>number:</p>\n    <input\n      value={newNumber}\n      onChange={handleNumberChange}\n    />\n    <button type=\"submit\">save</button>\n    </form>  \n  )\n}\n\nconst App = () => {\n  const [ titleColor, setTitleColor ] = useState('rgb(0,255,0')\n  const [ persons, setPersons ] = useState([\n    { name: 'Arto Hellas',\n      number: '112233' }\n  ]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ filter, setFilter ] = useState('')\n  const [ filteredPersons, setFilteredPersons ] = useState(persons)\n  const [ titleCounter, setTitleCounter ] = useState(1)\n  const [ titleCUp, setTitleCUp ] = useState(true)\n  const iniMessage={\n    content:\"Page loaded successfully\",\n    mType: \"success\"\n  }\n  const [ message, setMessage] = useState(iniMessage)\n\n  setTimeout(() => {\n    if (titleCounter===255){\n      setTitleCUp(false)}\n    if (titleCounter===0){\n      setTitleCUp(true)}\n    if (titleCUp===true){\n      if(titleCounter+10>=255){setTitleCounter(255)}\n      else{setTitleCounter(titleCounter+10)}\n    }\n    else{\n      if(titleCounter-10<=0){setTitleCounter(0)}\n      else{setTitleCounter(titleCounter-10)}\n    }\n\n    setTitleColor(`rgb(${titleCounter},${255-titleCounter},0)`)\n\n  }, 50);\n\n    \n  useEffect(() => {\n    console.log('effect')\n    personService\n      .initGet()\n      .then(response => {\n        console.log('promise fulfilled')\n        setPersons(response)\n        setFilteredPersons(response)\n      })\n  }, [])\n // console.log('render', persons.length, 'persons')\n\n  const tempMessage = (tmessage,mstime)=>{\n    setMessage(tmessage)\n    setTimeout(() => {setMessage(null)}, mstime)\n  }\n\n  const checkName = (nameObject) => {\n\n    if (persons.filter(person => person.name===nameObject.name).length === 0){ \n\n      setNewName('')\n      personService\n      .create(nameObject)\n      .then(response => {\n        setPersons(persons.concat(response))\n        setFilteredPersons(filteredPersons.concat(response))\n        tempMessage({\n          content:\"New name added to list\",\n          mType: \"success\"\n          } \n          ,5000)\n        })\n      .catch(error => {\n        if (error.response.status === 400){\n          tempMessage({\n            content:`${error.response.data.error}`,\n            mType: \"error\"\n          } ,5000)\n        }\n      })\n    \n    }\n    else{\n      const targetId=persons.filter(person => person.name===nameObject.name)[0].id\n      if (window.confirm(\n        `${nameObject.name} already existing, do you want to update the phone number?`)){\n          personService\n            .updateId(targetId,nameObject)\n            .then(response => {\n              setPersons(persons.map(person => person.id !== targetId ? person : response))\n              setFilteredPersons(filteredPersons.map(person => person.id !== targetId ? person : response))\n              tempMessage({\n                content: \"Phone number was successfully updated\",\n                mType: \"success\"\n              }\n              ,5000)\n            })\n            .catch(error => {\n             \n                tempMessage({\n                  content:`This person: '${nameObject.name}', was already removed from server`,\n                  mType: \"error\"\n                } ,5000)\n              setPersons(persons.filter(person => person.name !== nameObject.name))\n              console.log(persons.filter(person => person.id !== nameObject.id))\n              setFilteredPersons(filteredPersons.filter(person => person.name !== nameObject.name))\n              \n              \n            })\n\n        }\n    }     \n  }\n\n  const addName = (event) => {\n    console.log(\"eee\")\n    event.preventDefault()\n    const nameObject = {\n      name: newName,\n      number: newNumber\n    }\n    checkName(nameObject,persons)\n  }\n  \n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n    setFilteredPersons(persons.filter(person => \n      person.name.includes(event.target.value)))\n  }\n  setTimeout(() => {\n    if (message===iniMessage){setMessage(null)}\n  }, 5000)\n\n  return (\n    <div>\n      <MainTitle\n        titleColor={titleColor}\n      />\n      <Notification message={message} />\n        <p>Filter by name</p>\n        <FilterComp\n          filter={filter}\n          handleFilterChange={handleFilterChange}\n        />\n\n      <h2>Add new</h2>\n        <NewNameComp \n          addName={addName}\n          newName={newName}\n          handleNameChange={handleNameChange}\n          newNumber={newNumber}\n          handleNumberChange={handleNumberChange}\n        />\n   \n      <h2>Numbers</h2>\n      <FilteredNames\n        fpersons={filteredPersons}\n        setPersons={setPersons}\n        setFilteredPersons={setFilteredPersons}\n        persons={persons}\n        />\n    </div>\n  )\n\n  \n\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}