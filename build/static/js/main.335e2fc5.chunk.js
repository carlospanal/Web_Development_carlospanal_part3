(this.webpackJsonppart2_phonebook=this.webpackJsonppart2_phonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(2),l=t(3),i=t.n(l),s="http://powerful-hamlet-67777.herokuapp.com/api/persons",m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},f=function(){return i.a.get(s).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return console.log(e,n),i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){var n=e.message;return null===n?null:"success"===n.mType?r.a.createElement("div",{className:"greenmessage"},n.content):"error"===n.mType?r.a.createElement("div",{className:"redmessage"},n.content):void 0},b=function(e){var n={color:e.titleColor};return r.a.createElement("h1",{style:n},"Phonebook")},g=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("input",{value:n,onChange:t})},E=function(e){var n=e.fpersons,t=e.setPersons,a=e.setFilteredPersons,o=e.persons;return r.a.createElement("div",null,r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){window.confirm("Do you really want to delete?")&&d(e.id).then((function(){t(o.filter((function(n){return n.id!==e.id}))),a(n.filter((function(n){return n.id!==e.id})))}))}},"delete"))}))))},v=function(e){var n=e.addName,t=e.newName,a=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("p",null,"name:"),r.a.createElement("input",{value:t,onChange:a}),r.a.createElement("p",null,"number:"),r.a.createElement("input",{value:o,onChange:c}),r.a.createElement("button",{type:"submit"},"save"))},y=function(){var e=Object(a.useState)("green"),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)([{name:"Arto Hellas",number:"112233"}]),l=Object(u.a)(c,2),i=l[0],s=l[1],d=Object(a.useState)(""),y=Object(u.a)(d,2),w=y[0],j=y[1],O=Object(a.useState)(""),N=Object(u.a)(O,2),C=N[0],T=N[1],k=Object(a.useState)(""),S=Object(u.a)(k,2),P=S[0],F=S[1],x=Object(a.useState)(i),A=Object(u.a)(x,2),D=A[0],J=A[1],_={content:"Page loaded successfully",mType:"success"},B=Object(a.useState)(_),H=Object(u.a)(B,2),I=H[0],q=H[1];setTimeout((function(){"green"===t?o("red"):"red"===t&&o("green")}),500),Object(a.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),s(e),J(e)}))}),[]),console.log("render",i.length,"persons");var z=function(e,n){q(e),setTimeout((function(){q(null)}),n)};return setTimeout((function(){I===_&&q(null)}),5e3),r.a.createElement("div",null,r.a.createElement(b,{titleColor:t}),r.a.createElement(h,{message:I}),r.a.createElement("p",null,"Filter by name"),r.a.createElement(g,{filter:P,handleFilterChange:function(e){F(e.target.value),J(i.filter((function(n){return n.name.includes(e.target.value)})))}}),r.a.createElement("h2",null,"Add new"),r.a.createElement(v,{addName:function(e){e.preventDefault(),function(e){if(0===i.filter((function(n){return n.name===e.name})).length)s(i.concat(e)),j(""),J(D.concat(e)),m(e).then((function(e){s(i.concat(e)),z({content:"New name added to list",mType:"success"},5e3)}));else{var n=i.filter((function(n){return n.name===e.name}))[0].id;window.confirm("".concat(e.name," already existing, do you want to update the phone number?"))&&p(n,e).then((function(e){s(i.map((function(t){return t.id!==n?t:e}))),J(D.map((function(t){return t.id!==n?t:e}))),z({content:"Phone number was successfully updated",mType:"success"},5e3)})).catch((function(){z({content:"This person: '".concat(e.name,"', was already removed from server"),mType:"error"},5e3),s(i.filter((function(n){return n.name!==e.name}))),console.log(i.filter((function(n){return n.id!==e.id}))),J(D.filter((function(n){return n.name!==e.name})))}))}}({name:w,number:C})},newName:w,handleNameChange:function(e){j(e.target.value)},newNumber:C,handleNumberChange:function(e){T(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{fpersons:D,setPersons:s,setFilteredPersons:J,persons:i}))};t(36);c.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.335e2fc5.chunk.js.map