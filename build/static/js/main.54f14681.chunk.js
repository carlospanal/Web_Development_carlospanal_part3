(this.webpackJsonppart2_phonebook=this.webpackJsonppart2_phonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),o=t.n(c),u=t(2),l=t(3),s=t.n(l),i="/api/persons",m=function(e){return console.log("personsjs"),s.a.post(i,e).then((function(e){return e.data}))},f=function(){return s.a.get(i).then((function(e){return e.data}))},d=function(e){return s.a.delete("".concat(i,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return console.log(e,n),s.a.put("".concat(i,"/").concat(e),n).then((function(e){return e.data}))},b=function(e){var n=e.message;return null===n?null:"success"===n.mType?r.a.createElement("div",{className:"greenmessage"},n.content):"error"===n.mType?r.a.createElement("div",{className:"redmessage"},n.content):void 0},h=function(e){var n={color:e.titleColor};return r.a.createElement("h1",{style:n},"Phonebook")},g=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("input",{value:n,onChange:t})},E=function(e){var n=e.fpersons,t=e.setPersons,a=e.setFilteredPersons,c=e.persons;return r.a.createElement("div",null,r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){window.confirm("Do you really want to delete?")&&d(e.id).then((function(){t(c.filter((function(n){return n.id!==e.id}))),a(n.filter((function(n){return n.id!==e.id})))}))}},"delete"))}))))},v=function(e){var n=e.addName,t=e.newName,a=e.handleNameChange,c=e.newNumber,o=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("p",null,"name:"),r.a.createElement("input",{value:t,onChange:a}),r.a.createElement("p",null,"number:"),r.a.createElement("input",{value:c,onChange:o}),r.a.createElement("button",{type:"submit"},"save"))},j=function(){var e=Object(a.useState)("rgb(0,255,0"),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([{name:"Arto Hellas",number:"112233"}]),l=Object(u.a)(o,2),s=l[0],i=l[1],d=Object(a.useState)(""),j=Object(u.a)(d,2),y=j[0],O=j[1],w=Object(a.useState)(""),N=Object(u.a)(w,2),C=N[0],T=N[1],S=Object(a.useState)(""),k=Object(u.a)(S,2),P=k[0],F=k[1],x=Object(a.useState)(s),A=Object(u.a)(x,2),D=A[0],J=A[1],_=Object(a.useState)(1),B=Object(u.a)(_,2),H=B[0],I=B[1],q=Object(a.useState)(!0),z=Object(u.a)(q,2),G=z[0],K=z[1],L={content:"Page loaded successfully",mType:"success"},M=Object(a.useState)(L),Q=Object(u.a)(M,2),R=Q[0],U=Q[1];setTimeout((function(){255===H&&K(!1),0===H&&K(!0),I(!0===G?H+10>=255?255:H+10:H-10<=0?0:H-10),c("rgb(".concat(H,",").concat(255-H,",0)"))}),50),Object(a.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled"),i(e),J(e)}))}),[]);var V=function(e,n){U(e),setTimeout((function(){U(null)}),n)};return setTimeout((function(){R===L&&U(null)}),5e3),r.a.createElement("div",null,r.a.createElement(h,{titleColor:t}),r.a.createElement(b,{message:R}),r.a.createElement("p",null,"Filter by name"),r.a.createElement(g,{filter:P,handleFilterChange:function(e){F(e.target.value),J(s.filter((function(n){return n.name.includes(e.target.value)})))}}),r.a.createElement("h2",null,"Add new"),r.a.createElement(v,{addName:function(e){console.log("eee"),e.preventDefault(),function(e){if(0===s.filter((function(n){return n.name===e.name})).length)O(""),m(e).then((function(e){i(s.concat(e)),J(D.concat(e)),V({content:"New name added to list",mType:"success"},5e3)})).catch((function(e){400===e.response.status&&V({content:"".concat(e.response.data.error),mType:"error"},5e3)}));else{var n=s.filter((function(n){return n.name===e.name}))[0].id;window.confirm("".concat(e.name," already existing, do you want to update the phone number?"))&&p(n,e).then((function(e){i(s.map((function(t){return t.id!==n?t:e}))),J(D.map((function(t){return t.id!==n?t:e}))),V({content:"Phone number was successfully updated",mType:"success"},5e3)})).catch((function(n){V({content:"This person: '".concat(e.name,"', was already removed from server"),mType:"error"},5e3),i(s.filter((function(n){return n.name!==e.name}))),console.log(s.filter((function(n){return n.id!==e.id}))),J(D.filter((function(n){return n.name!==e.name})))}))}}({name:y,number:C})},newName:y,handleNameChange:function(e){O(e.target.value)},newNumber:C,handleNumberChange:function(e){T(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(E,{fpersons:D,setPersons:i,setFilteredPersons:J,persons:s}))};t(36);o.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.54f14681.chunk.js.map